{{ define "main" }}
    {{ $url := "/data/library.json" }}
    {{ $data := getJSON $url }}

    <h1 class="post-title p-name center">{{ .Title }}</h1>
    {{if $data }}
    <div class="library">
        {{ if $data.currently_reading }}
        {{ $books := $data.currently_reading }}
            <div class="read-state two_cols">
                <p>Currently Reading</p>
                <ol>
                    {{ range $books }}
                    {{ $book := . }}
                    <li>
                        <div itemprop="mainEntity" itemscope="" itemtype="http://schema.org/Book">
                            <div itemprop="name">{{ $book.title }}</div>
                            <div itemprop="author">{{ $book.author }}</div>
                        </div>
                    </li>
                    {{ end }}
                </ol>
            </div>
        {{ end }}

        {{ if $data.queued }}
        {{ $books := $data.queued }}
            <div class="read-state two_cols">
                <p>Queued</p>
                <ol>
                    {{ range $books }}
                        {{ $book := . }}
                        <li>
                            <div itemprop="mainEntity" itemscope="" itemtype="http://schema.org/Book">
                                <div itemprop="name">{{ $book.title }}</div>
                                <div itemprop="author">{{ $book.author }}</div>
                            </div>
                        </li>
                    {{ end }}
                </ol>
            </div>
        {{ end }}

        {{ if $data.recently_finished }}
            {{ $books := $data.recently_finished }}
            <div class="read-state">
                <p>Recently Finished</p>
                <ol>
                    {{ range $books }}
                    {{ $book := . }}
                    <li>
                        <div itemprop="mainEntity" itemscope="" itemtype="http://schema.org/Book">
                            <div itemprop="name">{{ if $book.blog_link }}<a href="{{ $book.blog_link }}">{{ end }}{{ $book.title }}{{ if $book.blog_link }}</a>{{ end }}</div>
                            <div itemprop="author">{{ $book.author }}</div>
                            {{ if $book.date_read }}
                                <div itemprop="dateCreated">{{ $book.date_read}}</div>
                                <div><div itemprop="reviewRating" class="star" style="width:{{ mul $book.my_rating 16 }}px"></div></div>
                            {{ end }}
                        </div>
                    </li>
                    {{ end }}
                </ol>
            </div>
        {{ end }}

        {{ if $data.read }}
        {{ $books := $data.read }}
        <div class="read-state read">
            <p>Read</p>
            <ol>
                {{ range $books }}
                {{ $book := . }}
                <li>
                    <div itemprop="mainEntity" itemscope="" itemtype="http://schema.org/Book">
                        <div itemprop="name">{{ if $book.blog_link }}<a href="{{ $book.blog_link }}">{{ end }}{{ $book.title }}{{ if $book.blog_link }}</a>{{ end }}</div>
                        <div itemprop="author">{{ $book.author }}</div>
                        {{ if $book.date_read }}
                        <div itemprop="dateCreated">{{ $book.date_read }}</div>
                        {{ else }}
                            <div itemprop="dateCreated">-</div>
                        {{ end }}
                        {{ if $book.my_rating }}
                            <div>
                                <div itemprop="reviewRating" class="star" style="width:{{ mul $book.my_rating 16 }}px"></div>
                            </div>
                        {{ end }}
                    </div>
                </li>
                {{ end }}
            </ol>
        </div>
        {{ end }}

        {{ if $data.unread }}
        {{ $books := $data.unread }}
        <div class="read-state two_cols">
            <p>Unread</p>
            <ol>
                {{ range $books }}
                {{ $book := . }}
                <li>
                    <div itemprop="mainEntity" itemscope="" itemtype="http://schema.org/Book">
                        <div itemprop="name">{{ $book.title }}</div>
                        <div itemprop="author">{{ $book.author }}</div>
                        <div itemprop="dateCreated">{{ $book.date_read}}</div>
                    </div>
                </li>
                {{ end }}
            </ol>
        </div>
        {{ end }}
    </div>
    {{ end }}
{{ end }}

{{ define "footer" }}

{{/*    {{ partial "extras/jump" }}*/}}

    <!-- Back to top -->
    <div class="backtotop center no-text-decoration">
        <a href="#">back to <span class="top">top</span></a>
    </div>
{{ end }}
